body { margin: 0; background-color: #000; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
.App { height: 100vh; display: flex; flex-direction: column; background-size: cover; background-position: center; }

.top-ui-container { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); display: flex; align-items: center; gap: 15px; z-index: 50; }
.score-area { background: rgba(0,0,0,0.85); border: 3px solid #ff0000; padding: 10px 25px; border-radius: 50px; color: #fff; font-weight: bold; white-space: nowrap; }
.char-name { color: #ff0000; margin-right: 5px; }
.score-num { font-size: 1.8rem; color: #fff; text-shadow: 0 0 10px red; }

.move-toggle-box { width: 50px; height: 50px; background: #fff; border: 3px solid #000; border-radius: 10px; cursor: pointer; display: flex; justify-content: center; align-items: center; transition: 0.3s; }
.move-toggle-box img { width: 80%; pointer-events: none; }
.move-toggle-box.active { border-color: #ff0000; background: #000; filter: invert(1); transform: scale(1.1); }

/* --- 修正 1: 紅色特效減弱，並防止覆蓋七彩 --- */
.effect-red {
    /* 調整亮度與對比，讓輪廓清晰 */
    filter: brightness(0.8) sepia(1) hue-rotate(-50deg) saturate(5) drop-shadow(0 0 10px red) !important;
    animation: shake 0.1s infinite;
}

/* 確保七彩特效優先順序更高，且效果更明顯 */
.effect-rainbow {
    animation: rainbow-anim 1s infinite linear !important;
}

@keyframes rainbow-anim {
    0% { filter: hue-rotate(0deg) saturate(200%) brightness(1.2) drop-shadow(0 0 15px white); }
    100% { filter: hue-rotate(360deg) saturate(200%) brightness(1.2) drop-shadow(0 0 15px white); }
}

@keyframes shake { 0%{transform:translate(1px,1px)} 50%{transform:translate(-2px,-1px)} 100%{transform:translate(1px,1px)} }

.main-display { flex: 1; display: flex; justify-content: center; align-items: center; position: relative; }
.pop-img { max-width: 80%; max-height: 60vh; user-select: none; transition: filter 0.3s; }
.draggable { cursor: grab !important; border: 2px dashed rgba(255,255,255,0.3); }

.control-panel { background: #fff; border-top: 5px solid #ff0000; padding: 15px; transition: 0.4s; z-index: 100; }
.control-panel.hide { transform: translateY(100%); }
.dropdown-container { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
.checkbox-grid { display: grid; grid-template-columns: repeat(2, 1fr); background: #f0f0f0; padding: 10px; border-radius: 5px; max-height: 80px; overflow-y: auto; color: #000; font-size: 0.8rem; }
.toggle-panel-btn { position: absolute; bottom: 20px; right: 20px; z-index: 110; background: #ff0000; color: #fff; border: none; padding: 10px; border-radius: 5px; cursor: pointer; }

@media (max-width: 600px) { .top-ui-container { width: 95%; flex-direction: column; top: 10px; } .score-area { font-size: 0.7rem; padding: 5px 15px; } }